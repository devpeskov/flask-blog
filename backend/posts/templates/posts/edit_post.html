{% extends 'base.html' %}

{% block title %}
  Edit the post
{% endblock %}

{% block content_title %}
  Edit the post
{% endblock %}

{% block content %}
  <form class="row g-3" action="{{ url_for('posts.edit_post', slug=post.slug) }}" method="POST">

    <!-- inputs from WTForms -->
    {% for field in form %}
      <div class="col-md-7">
        {{ field.label(class="control-label") }}
        {{ field(class="form-control") }}
      </div>
    {% endfor %}

    <div class="col-md-7">
      <label class="form-label" for="tags[]">Tags</label><br>
      <span class="btn btn-outline-primary" onclick="addTagInput()">Add new tag</span>
      <div id="tags">
        <!-- Tag-inputs from backend -->
        {% for tag in post.tags %}
          <div class="row">
            <div class="col-md-6">
              <input type="text" class="form-control" name="tags[]" value="{{ tag }}" maxlength="100">
            </div>
            <div class="col-md-2">
              <span class="btn btn-outline-danger" onclick="removeTagInput(this)">-</span>
            </div>
          </div>
        {% endfor %}

        <!-- Here will be placed new tag-inputs generated by javascript -->
      </div><br>
      <button type="submit" id="submitButton" class="btn btn-primary mb-3">Confirm changes</button>
    </div>
  </form>

  <script src="/static/js/tag_adder.js"></script>
{% endblock %}
